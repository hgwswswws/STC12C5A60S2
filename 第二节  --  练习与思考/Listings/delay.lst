C51 COMPILER V9.54   DELAY                                                                 03/28/2016 09:10:39 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE DELAY
OBJECT MODULE PLACED IN .\Objects\delay.obj
COMPILER INVOKED BY: D:\MDK5.17A\C51\BIN\C51.EXE DEVICES\SYSTEM\delay.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\DEVICES\LED;.\
                    -DEVICES\TIMER;.\DEVICES\SYSTEM) DEBUG OBJECTEXTEND PRINT(.\Listings\delay.lst) TABS(3) OBJECT(.\Objects\delay.obj)

line level    source

   1          
   2          #include "delay.h"
   3          
   4          /**********************************************
   5           * 函数功能: 微秒级精确延时
   6           * 参数范围: 1us~65535us(0.001ms~65.535ms)
   7           * 运行环境: STC12@32.000MHz
   8           * 最大误差: 0.00%
   9           * 作者日期: 电器开发部 - (2015-2-23)
  10          **********************************************/
  11          # pragma optimize(4, SPEED)
  12          void delay_us(unsigned int n)
  13          {
  14   1          extern void _nop_(void);
  15   1          register unsigned char i = n, j = (n>>8);
  16   1          _nop_(); _nop_(); _nop_();
  17   1          if ((--i) | j)
  18   1          {
  19   2              do
  20   2              {
  21   3                  _nop_(); _nop_(); _nop_(); _nop_(); _nop_(); _nop_(); _nop_(); _nop_();
  22   3                  if (0xFF == (i--)) j--; else {_nop_(); _nop_(); _nop_(); _nop_(); _nop_(); _nop_();};
  23   3              } while (i | j);
  24   2          }
  25   1      }
  26          
  27          /* 毫秒延时函数 */
  28          void delay_ms(unsigned int n) {while (n--) delay_us(1000);}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     64    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
